<div class="graph_area">
  <div class="d-flex px-3 align-items-center mb-2">
    <div class="ml-auto d-flex">
      <div class="risk d-flex align-items-center">
        <span class="diamond">
          <i *ngIf="logAnalysisResults?.sensitivity == 'high'" class="fa {{logSensitivityScores[0]?.high?.iconclass}}" aria-hidden="true"></i>
          <i *ngIf="logAnalysisResults?.sensitivity == 'medium'" class="fa {{logSensitivityScores[0]?.medium?.iconclass}}" aria-hidden="true"></i>
          <i *ngIf="logAnalysisResults?.sensitivity == 'low'" class="fa {{logSensitivityScores[0]?.low?.iconclass}}" aria-hidden="true"></i>
        </span>      
        <span>
            <b *ngIf="logAnalysisResults?.sensitivity == 'high'" class="d-block {{logSensitivityScores[0]?.high?.textclass}}" >{{logSensitivityScores[0]?.high?.risk}}</b>            
            <b *ngIf="logAnalysisResults?.sensitivity == 'medium'" class="d-block {{logSensitivityScores[0]?.medium?.textclass}}" >{{logSensitivityScores[0]?.medium?.risk}}</b>            
            <b *ngIf="logAnalysisResults?.sensitivity == 'low'" class="d-block {{logSensitivityScores[0]?.low?.textclass}}" >{{logSensitivityScores[0]?.low?.risk}}</b>            
            Precieved Risk
          </span>
      </div>      
      <select (change)="changeSensitivity($event)" [(ngModel)]="selectedSensitivity" class="form-control"> 
        <option *ngFor='let sensitivity of sensitivityLevels' [value]="sensitivity">
          {{sensitivity}}
        </option>
      </select>      
    </div>
    <!-- /.ml-auto -->
  </div>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="graph01" role="tabpanel" aria-labelledby="graph01-tab">
      <div class="dot_container p-3 chart-bg-color">
        <div class="graph" #ChartSize>
          <div class="dropdown dropdown-icon-remove float-right">
            <button class="btn p-0 dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              <img src="../../../assets/images/dotted-icon.png" alt="">
            </button>
            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
              <li class="dropdown-item">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="customCheckdot1">
                  <label class="custom-control-label" for="customCheckdot1"><span class="dot_ind"
                      style="background-color: #a32133;"></span>Critical</label>
                </div>
              </li>
              <li class="dropdown-item">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="customCheckdot2">
                  <label class="custom-control-label" for="customCheckdot2"><span class="dot_ind"
                      style="background-color: #e0392e;"></span>Error</label>
                </div>
              </li>
              <li class="dropdown-item">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="customCheckdot3">
                  <label class="custom-control-label" for="customCheckdot3"><span class="dot_ind"
                      style="background-color: #f3af70;"></span>Warning</label>
                </div>
              </li>
              <li class="dropdown-item">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="customCheckdot4">
                  <label class="custom-control-label" for="customCheckdot4"><span class="dot_ind"
                      style="background-color: #babebd;"></span>Others</label>
                </div>
              </li>
            </ul>
          </div>
          <app-bubble-chart [dataSource]="bubbleChartData" [view]="chartSize" [chartProperty]="bubbleChartProperty"></app-bubble-chart>
        </div>
      </div>
      <!-- /.dot_container -->
    </div>
    <div class="tab-pane fade" id="graph02" role="tabpanel" aria-labelledby="graph02-tab">
      <img src="../../../assets/images/dot-chart.jpg" class="img-fluid" alt="dot chart" />
    </div>
  </div>
</div>
<!-- /.graph_area -->

<div class="tab-default pt-3">
  <ul class="nav nav-tabs" id="myTabDefault" role="tablist">
    <li class="nav-item" (click)="getLogAnalysis()">
      <a class="nav-link active" id="{{eventTabLabeledBy}}" data-toggle="tab" href="#unexpected" role="tab" aria-controls="unexpected" aria-selected="true">Unexpected</a>
    </li>
    <li class="nav-item" (click)="onClickLogEventTab('expected')">
      <a class="nav-link" id="{{eventTabLabeledBy}}" data-toggle="tab" href="#expected" role="tab" aria-controls="expected" aria-selected="false">Expected</a>
    </li>
    <li class="nav-item" (click)="onClickLogEventTab('baseline')">
      <a class="nav-link" id="{{eventTabLabeledBy}}" data-toggle="tab" href="#baseline" role="tab" aria-controls="baseline" aria-selected="false">Baseline</a>
    </li>
    <li class="nav-item" (click)="onClickLogEventTab('ignored')">
      <a class="nav-link" id="{{eventTabLabeledBy}}" data-toggle="tab" href="#ignored" role="tab" aria-controls="ignored" aria-selected="false">Ignored</a>
    </li>
    <li class="nav-item" (click)="onClickLogEventTab('all')">
      <a class="nav-link" id="{{eventTabLabeledBy}}" data-toggle="tab" href="#all" role="tab" aria-controls="all" aria-selected="false">All</a>
    </li>
  </ul>
  <div class="tab-content" id="myTabDefaultContent">
    <div class="tab-pane py-4 fade show active" id="{{eventTab}}" role="tabpanel" aria-labelledby="">
      <div class="accordion accordion-errors" id="accordionExample" *ngIf="logAnalysisData?.clusters?.length > 0"> 

        <div class="card mb-2" *ngFor="let log of logAnalysisData?.clusters">
          <div class="card-header d-flex align-items-center justify-content-between" id="heading01">
            <div class="score" *ngIf="selectedSensitivity=='high'">Impact On Score {{log.scoreReduction?.high}}</div>
            <div class="score" *ngIf="selectedSensitivity=='medium'">Impact On Score {{log.scoreReduction?.medium}}</div>
            <div class="score" *ngIf="selectedSensitivity=='low'">Impact On Score {{log.scoreReduction?.low}}</div>
            <div class="times"><b>{{log.v1Len}}</b>Baseline</div>
            <div class="times"><b>{{log.v2Len}}</b>New Release</div>
            <!-- <div class="error_graph"><img src="../../../assets/images/graph_lines_01.png" class="img-fluid"
                alt="graph" /></div> -->

            <div class="dropdown error_dropdown">
              <select (change)="changeCriticality($event,log)" [(ngModel)]="log.color" class="btn dropdown-toggle pb-0 pl-0 pr-2 pt-0 criticality-select" [ngClass]="{'text-danger':log.color == 'dark red', 'text-error':log.color=='red','text-warning':log.color=='yellow','text-muted':log.color=='green'}"> 
                <option *ngFor='let criticality of criticalityList' [value]="criticality.criticalityColor" class="{{criticality.textclass}}">
                  {{criticality.displayValue}}
                </option>
              </select>
              <div class="dropdown-menu px-3 py-2 dropdown-shadow dropdown-reason dropdown-menu-right"
                aria-labelledby="dropdownMenuButton">
                <div class="dropdown_header d-flex align-items-center justify-content-between mb-2">
                  <span>Reason for Reclassification</span>
                  <i class="fa text-muted fa-times"></i>
                </div>
                <!-- /.dropdown_header -->

                <div>
                  <div class="form-group mb-2">
                    <textarea class="form-control" rows="5"></textarea>
                  </div>
                  <div class="text-right">
                    <button type="submit" class="btn btn-default">Close</button>
                    <button type="submit" class="btn  btn-primary">Submit</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="dropdown error_dropdown">
               <select (change)="changeClusterTag($event,log)" class="btn dropdown-toggle pb-0 pl-0 pr-2 pt-0 criticality-select" > 
               <!-- [ngClass]="{'text-danger':log.color == 'dark red', 'text-error':log.color=='red','text-warning':log.color=='yellow','text-muted':log.color=='green'}" -->
                <option *ngFor='let tag of clusterTagList' [value]="tag.value" class="{{tag.textclass}}">
                  {{tag.displayValue}}
                </option>
              </select>
              <div class="dropdown-menu px-3 py-2 dropdown-shadow dropdown-reason dropdown-menu-right"
                aria-labelledby="dropdownMenuButton">
                <div class="dropdown_header d-flex align-items-center justify-content-between mb-2">
                  <span>Reason for Reclassification</span>
                  <i class="fa text-muted fa-times"></i>
                </div>
                <!-- /.dropdown_header -->

                <div>
                  <div class="form-group mb-2">
                    <textarea class="form-control" rows="5"></textarea>
                  </div>
                  <div class="text-right">
                    <button type="submit" class="btn btn-default">Close</button>
                    <button type="submit" class="btn  btn-primary">Submit</button>
                  </div>
                </div>
              </div>
            </div>
            <div data-toggle="tooltip" data-placement="top" title="Time Analysis"><i class="fa fa-bar-chart icon-bar-chart" aria-hidden="true"></i></div>
            <button class="btn p-0" data-toggle="tooltip" data-placement="top" title="Download Cluster Info"><img src="../../../assets/images/download.png" alt="download" /></button>
            <button class="btn btn-link pr-0" type="button" data-toggle="collapse" [attr.data-target]="'#log' + log.id"
              aria-expanded="true" aria-controls="collapse01">
              <i class="fa fa-sort-down"></i>
            </button>
          </div>

          <div id="log{{log.id}}" class="collapse" aria-labelledby="heading01" data-parent="#accordionExample">
            <div class="card-body text-wrap-normal">
              <span [outerHTML]="log.combineClust | replaceLineBreaks"></span>
            </div>
          </div>
        </div>
      </div>
      <h3 *ngIf="logAnalysisData?.clusters?.length == 0">No Content</h3>
    </div>    
  </div>
</div>


<!-- /.col-sm-4 -->

<!-- /.tab-default -->