<div class="tab-content h-100 p-3 flex-grow-1">
  <div *ngIf = "!apploading" class="tab-pane d-flex flex-column bg-white h-100 fade show active">
    <!-- <div class="page_access text-right py-2 px-3">
      <button class="btn btn-default ml-1" (click)="cancelForm()">Cancel</button>
      <button class="btn btn-primary ml-2" (click)="SubmitForm()">Save & Finish</button>
    </div> -->
    <!-- /.page_access ml-auto -->
    <div class="setup-content">
      <div class="row">
  
        <!-- ###################### Tree Section Starts #####################################-->
  
        <div class="col-sm-3">
          <div class="sidebar-tree">
            <ul class="tree-inset list-unstyled {{createApplicationForm.invalid == false ?'tree-active':''}}" (click)="loadApplicationForm()">
              <li class="ti-title showElementHover">
                <i  class="{{createApplicationForm.invalid == false ?'fas fa-check-circle':'far fa-dot-circle'}}"></i>
                <span>Application Details</span>
              </li>
              <li class="ti-item showElementHover" (click)="loadApplicationForm()">
                <i class="{{createApplicationForm.value.name !== ''?'fas fa-check-circle':'far fa-dot-circle'}}"></i>
                <span>Application Name :</span>
                <strong>{{createApplicationForm.value.name}}</strong>
              </li>
              <br>
              <br>
            </ul>
            <!-- /.tree-inset -->
            <ul class="tree-inset  list-unstyled {{servicesForm.invalid == false ?'tree-active':''}}">
              <li class="ti-title showElementHover" (click)="loadServiceForm()">
                <i class="{{servicesForm.invalid == false ? 'fas fa-check-circle':'far fa-dot-circle'}}"></i>
                <span data-toggle="tooltip" data-placement="top" data-original-title="One of the logical entity of the application">Services</span>
              </li>             
              <ng-container *ngFor="let serviceArr of servicesForm.getRawValue().services; let i = index">
              <li class="ti-item">
                <i class="{{serviceArr.serviceName !== '' ? 'fas fa-check-circle' : 'far fa-dot-circle'}}"></i>
                <span *ngIf="!editMode">Service name</span>
                <strong (click)="editServiceClick(serviceArr, i)" style="cursor: pointer;">{{serviceArr.serviceName}}</strong>
              </li>
            </ng-container>
              <br>
              <br>
            </ul>

             <!-- /.tree-inset -->
         
            <ul class="tree-inset list-unstyled {{environmentForm.invalid == true ?'tree-active':''}}">
            <li class="ti-title showElementHover" (click)="loadEnvironmentsForm()">
              <i class="{{environmentForm.invalid == true ? 'fas fa-check-circle':'far fa-dot-circle'}}"></i>
              <span data-toggle="tooltip" data-placement="top" data-original-title="Environmental values for the CICD pipeline">Environments</span>
            </li>
            <!-- <li class="ti-item" *ngFor="let env of environmentForm.value.environments; let index = i">
              <i class="{{env.value !== '' ? 'fas fa-check-circle' : 'far fa-dot-circle'}}"></i>
              <span>{{env.key !== ''? env.key : ''}} :</span>
              <strong *ngIf="env.value !== ''? true:false">{{env.value !== ''? env.value : ''}}</strong>
            </li> -->
          </ul>

          <!-- <ul class="tree-inset list-unstyled {{environmentForm.value.environments[0].key !== '' ? 'tree-active' : ''}}"
          *ngIf="environmentForm.value.environments.length !== 0 ? true : false ">
          <li class="ti-title">
            <i class="{{environmentForm.value.environments[0].key !== '' ? 'fas fa-check-circle' : 'far fa-dot-circle'}}"></i>
            <span>Environment Details</span>
          </li>
          <li class="ti-item" *ngFor="let env of environmentForm.value.environments; let index = i">
            <i class="{{env.value !== '' ? 'fas fa-check-circle' : 'far fa-dot-circle'}}"></i>
            <span>{{env.key !== ''? env.key : ''}} :</span>
            <strong *ngIf="env.value !== ''? true:false">{{env.value !== ''? env.value : ''}}</strong>
          </li>
        </ul> -->

            <!-- /.tree-inset -->
            <ul class="tree-inset list-unstyled {{groupPermissionForm.invalid == true ?'tree-active':''}}">
              <li class="ti-title showElementHover" (click)="loadGroupPermissionForm()">
                <i  class="{{groupPermissionForm.invalid == true ? 'fas fa-check-circle':'far fa-dot-circle'}}"></i>
                <span data-toggle="tooltip" data-placement="top" data-original-title="Authorisation definition for this application">Group Permissions</span>
              </li>
              <!-- <li class="ti-item" *ngFor="let group of groupPermissionForm.value.userGroups; let index = i">
                <i class="{{group.userGroupId !== '' ? 'fas fa-check-circle' : 'far fa-dot-circle'}}"></i>
                <span>{{group.userGroupId !== ''?groupProperties(true,group.userGroupId):''}} :</span>
                <strong *ngIf="group.permission !== ''? true:false">{{groupProperties(false,group.permissionIds)}}</strong>
              </li> -->
            </ul>
            <!-- <ul class="tree-inset list-unstyled {{groupPermissionForm.value.userGroups[0].userGroupId !== '' ? 'tree-active' : ''}}"
              *ngIf="groupPermissionForm.value.userGroups.length > 0 ? true : false ">
              <li class="ti-title">
                <i class="{{groupPermissionForm.value.userGroups[0].userGroupId !== '' ? 'fas fa-check-circle' : 'far fa-dot-circle'}}"></i>
                <span>Group Permissions Details</span>
              </li>
              <li class="ti-item" *ngFor="let group of groupPermissionForm.value.userGroups; let index = i">
                <i class="{{group.userGroupId !== '' ? 'fas fa-check-circle' : 'far fa-dot-circle'}}"></i>
                <span>{{group.userGroupId !== ''?groupProperties(true,group.userGroupId):''}} :</span>
                <strong *ngIf="group.permission !== ''? true:false">{{groupProperties(false,group.permissionIds)}}</strong>
              </li>
            </ul> -->
         
          
            <!-- /.tree-inset -->
          </div>
          <!-- /.sidebar-tree -->
        </div>

       
  
        <!-- ###################### Tree Section Ends #####################################-->
  
        <div class="col-sm-9">
          <div class="p-3">
            <div class="row">
  
              <!-- ###################### Application Section Starts #####################################-->
  
              <div class="col-6" *ngIf="showApplicationForm">
                <form [formGroup]="createApplicationForm">
                  <div class="form-group">
                    <label>Application Name <span class="mandatory">*</span></label>
                    <input type="text" appLowercase class="form-control" [readonly]="editMode || applicationId" formControlName="name"  [ngClass]="createApplicationForm.get('name').invalid && createApplicationForm.get('name').touched ? 'is-invalid':''">
                    <span *ngIf="createApplicationForm.get('name').invalid && createApplicationForm.get('name').touched"
                      class="invalid-feedback">
                      <span *ngIf="createApplicationForm.get('name').errors['required']">Application Name is
                        required</span>
                      <span *ngIf="createApplicationForm.get('name').errors['nameExists'] && !appPrimaryEdit">Application already
                        exists with same name. Please choose a unique application name</span>
                      <span *ngIf="createApplicationForm.get('name').errors['containSpace']">Space is not allowed in application name</span>
                      <span *ngIf="createApplicationForm.get('name').errors['startingFromNumber']">The application name must begin with a letter.</span>
                      <span *ngIf="createApplicationForm.get('name').errors['symbols']">No Special characters are allowed.</span>
                    </span>
                  </div>
                  <div class="form-group">
                    <label>Application Description</label>
                    <textarea class="form-control" rows="3" formControlName="description"></textarea>
                  </div>
                  <div class="form-group">
                    <label>email Id <span class="mandatory">*</span></label>
                    <input type="text" class="form-control" formControlName="emailId" [ngClass]="createApplicationForm.get('emailId').invalid && createApplicationForm.get('emailId').touched ? 'is-invalid':''">
                    <span *ngIf="createApplicationForm.get('emailId').invalid && createApplicationForm.get('emailId').touched" class="invalid-feedback">
                      <span *ngIf="createApplicationForm.get('emailId').errors['required']">emailId is required</span>
                      <span *ngIf="createApplicationForm.get('emailId').errors['emailId']">Please enter valid emailId Id</span>
                    </span>
                  </div>
                  <div class="form-group" >
                    <label>Image Source <i data-toggle="tooltip" data-placement="top" data-original-title="Repository to fetch images for Release Management" class="fa fa-question-circle" aria-hidden="true"></i></label>
                    <select *ngIf="configuredImage == '' " class="form-control"  formControlName="imageSource" (change)="onImageSourceSelect($event.target.value)"
                    [ngClass]="createApplicationForm.get('imageSource').invalid && createApplicationForm.get('imageSource').touched?'is-invalid':''">
                      <option value="">Select</option>
                      <option *ngFor="let imageData of imageSourceData" value="{{imageData.name}}">{{imageData.name}}</option>
                      <!-- <option *ngIf="configuredImage && editMode" value="{{configuredImage}}">{{configuredImage}}</option> -->
                    </select>
                    <select *ngIf="configuredImage" class="form-control"  formControlName="imageSource" (change)="onImageSourceSelect($event.target.value)"
                    [ngClass]="createApplicationForm.get('imageSource').invalid && createApplicationForm.get('imageSource').touched?'is-invalid':''">
                      <option value="">Select</option>
                      <option  value="{{configuredImage}}">{{configuredImage}}</option>
                      <!-- <option *ngIf="configuredImage && editMode" value="{{configuredImage}}">{{configuredImage}}</option> -->
                    </select>
                    <span *ngIf="createApplicationForm.get('imageSource').invalid && createApplicationForm.get('imageSource').touched"
                      class="invalid-feedback">
                      Image Source is required
                    </span>
                  </div>
                </form><br>
                <div class="col-10"  *ngIf="showApplicationForm">
                  <!-- <hr class="ml-0 mt-3 mb-3" /> -->
                </div>
              
                <!-- /.form-group -->


              </div>
              
                 <!--col-12-->
                 <div class="col-8 pull-right"  *ngIf="showApplicationForm">
                  <div class="page_access text-right py-2 px-3">
                    <button class="btn btn-primary ml-2" *ngIf="editMode" (click)="SubmitApplicationForm()">Update & Next</button>
                    <button class="btn btn-primary ml-2" *ngIf="!editMode" (click)="SubmitApplicationForm()">Save & Next</button>
                    <button class="btn btn-default ml-1" (click)="cancelForm()">Cancel</button>
                    <!-- <button class="btn btn-default ml-2" disabled="disabled">Save</button> -->
                   
                  </div>
                </div>
                  <!--/.clo-12-->
              <!-- /.col-6 -->
  
              <!-- ###################### Application Section Ends #####################################-->
  
              <!-- ###################### Services Section Starts #####################################-->
  
            
              <!-- /.col-8 -->
              <div class="col-12" *ngIf="showServiceForm" >
                <form [formGroup]="servicesForm">
                  <div class="form-group service_section">
                    <div class="col-12" formArrayName="services">
                      <div class="row" *ngFor="let serviceArr of servicesForm.get('services')['controls']; let i=index">
                        <div class="col-12 padding0" [formGroupName]="i" *ngIf="currentServiceIndex == i">                          
                          <div class="col-6 form-group mb-3 text-muted padding0">
                            <label>Service Name <span class="mandatory">*</span></label>
                            <div class="d-flex  mr-4 align-items-center">
                              <input type="text" appLowercase class="form-control input_len" formControlName="serviceName" 
                              [ngClass]="servicesForm.get('services')['controls'][i].get('serviceName').invalid && servicesForm.get('services')['controls'][i].get('serviceName').touched ? 'is-invalid':''">
                              <button [disabled]="serviceStatus[i] == 'Edit'" class="btn btn-primary ml-4" type="submit" (click)="saveServiceForm(i)" >Save</button>
                              <button class="btn btn-default ml-1" (click)="cancelForm()">Cancel</button>
                              <!-- <button class="btn btn-default ml-2" disabled="disabled">Save</button> -->
                              <a class="text-muted ml-3 formarray_btn"  data-toggle="tooltip" data-placement="right" title="Delete Service" 
                              (click)="deleteService(i)" *ngIf ="servicesForm.get('services')['controls'].length > 1 ? true : false">
                                <i style="color: red !important;" class="far fa-trash-alt"></i></a>
                            </div>
                              <span *ngIf="servicesForm.get('services')['controls'][i].get('serviceName').invalid && servicesForm.get('services')['controls'][i].get('serviceName').touched"
                              class="help-block">
                              <span *ngIf="servicesForm.get('services')['controls'][i].get('serviceName').errors['required']">Service name is required</span>
                              <span *ngIf="servicesForm.get('services')['controls'][i].get('serviceName').errors['containSpace']">Space is not allowed in Service Name</span>
                              <span *ngIf="servicesForm.get('services')['controls'][i].get('serviceName').errors['startingFromNumber']">The service name must begin with a letter.</span>
                              <span *ngIf="servicesForm.get('services')['controls'][i].get('serviceName').errors['symbols']">No Special characters are allowed.</span>
                            </span>
                          </div>  

                          <div class="row padding0" *ngIf="showFeatureData">
                            <div class="col-4 mb-3 form-group">
                              <table class="table table-bordered">
                                <thead>
                                <tr>
                                  <th>Feature</th>
                                  <th>Active</th>
                                </tr>
                                </thead>
                                <tbody>
                                  <ng-container *ngFor="let featureName of featureList;let f=index;">
                                    <tr  [ngClass]="{'active-service': featureName == selectedFeature[i] }">
                                      <td  class="showElementHover" (click)="selectFeature(featureName,i)">
                                      <!-- <textarea class="custom-control-input" name="featureName" formControlName="featureName">{{featureName}}</textarea> -->
                                        <div class="custom-control custom-radio">
                                        <input id="featureName{{i}}" type="radio" class="custom-control-input" value="{{featureName}}" name="featureName" formControlName="featureName">
                                        <label class="custom-control-label" for="featureName{{i}}">{{featureNameCase(featureName)}}</label>
                                      </div>
                                      </td>
                                      <td *ngIf = "editMode">
                                        <span *ngIf="!isFeaturePresent[serviceId] || !isFeaturePresent[serviceId][featureName]">-</span>
                                        <span>
                                          <i *ngIf="isFeaturePresent[serviceId] && isFeaturePresent[serviceId][featureName]" class="fa fa-check" [class.color-green]="featureName != selectedFeature[i]" aria-hidden="true"></i>
                                        </span>
                                      </td>
                                      <td *ngIf = "!editMode && featureName == 'visibility'">
                                        <span *ngIf="gateId == '' || gateId == null || gateId == undefined">-</span>
                                        <span *ngIf = "gateId != '' && gateId != null && gateId != undefined">
                                          <i class="fa fa-check" [class.color-green]="featureName != selectedFeature[i]" aria-hidden="true"></i>
                                        </span>
                                      </td>
                                      <td *ngIf = "!editMode && featureName == 'deployment_verification'">
                                        <span *ngIf = "!deploymentVerificationFeatureSaved">-</span>
                                        <span *ngIf = "deploymentVerificationFeatureSaved">
                                          <i class="fa fa-check" [class.color-green]="featureName != selectedFeature[i]" aria-hidden="true"></i>
                                        </span>
                                        
                                      </td>
                                      <td *ngIf = "!editMode && featureName == 'sapor'">
                                        <span *ngIf = "!saporFeatureSaved">-</span>
                                        <span *ngIf = "saporFeatureSaved">
                                          <i class="fa fa-check color-green" aria-hidden="true"></i>
                                        </span>
                                      </td>
                                      <!-- <span><i *ngIf = "gateId != '' && gateId != null && gateId != undefined " class="fa fa-check" aria-hidden="true"></i></span> -->
                                    </tr>
                                  </ng-container>
                                </tbody>
                              </table>
                            </div>
                              <div class="col-7" formGroupName="saporConfiguration" *ngIf="selectedFeature[i] === 'sapor'" >

                                <div formArrayName="pipelines"  >
                                  <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                      <th>Release Management Configuration</th>
                                    </tr>
                                    </thead>
                                  </table>
                                  <div class="row" 
                                    *ngFor="let pipelineArr of serviceArr.get('saporConfiguration.pipelines')['controls'];let j=index">
                                    <div class="col-12 text-center" *ngIf="createApplicationForm.value.imageSource == '' && applicationId">
                                      <div class="help-block" style="font-size:16px;">To configure Sapor feature please select an imagesource in <a class="imageSourceLabel" (click)="loadApplicationForm()">application</a> </div>
                                     
                                      <br><br>
                                </div>
                                    <div class="col-12 " [formGroupName]="j">
                                      <div class="form-group mb-3 text-muted">
                                        <label>Select Service Pipeline</label>
                                        <div class="d-flex  mr-5 align-items-center">
                                          <select class="form-control" formControlName="pipelinetemplate" (change)="onPipelineSelect(i,j,$event.target.value)"
                                          [ngClass]="!pipelineArr.get('pipelinetemplate').valid && pipelineArr.get('pipelinetemplate').touched ? 'is-invalid':''">
                                            <option value="" [disabled]="true">Select</option>
                                            <option *ngFor="let pipelineData of pipelineExists" value="{{pipelineData.name}}">{{pipelineData.name}}</option>
                                          </select>
                                          <!-- <a class="text-muted ml-3 formarray_btn"><i class="fas fa-plus"></i></a> -->
                                        </div>
                                        <span *ngIf="!pipelineArr.get('pipelinetemplate').valid && pipelineArr.get('pipelinetemplate').touched"
                                        class="help-block">Pipeline is required</span>
                                      </div>
                                      <div class="form-group mb-3 text-muted" formGroupName="dockerImageName">
                                        <label>Docker Account & Image Name</label>
                                        <div class="d-flex  mr-5 align-items-center">
                                            <div class="col-5 dockerImageSource">
                                              <select class="form-control customAcc" formControlName="accountName" value="{{dockerAccountName}}" (change)="onChangeDockerAcc($event,i)"
                                              [ngClass]="!pipelineArr.get('dockerImageName.imageName').valid && pipelineArr.get('dockerImageName.imageName').touched ? 'wheninvalid':''">
                                                <option value="" [disabled]="true">Select</option>
                                                <option *ngFor="let dockerimages of dockerImageData" value="{{dockerimages.imageSource}}">{{dockerimages.imageSource}}</option>
                                              </select>
                                            </div>
                                            <div class="col-7 dockerImageSource">
                                              <select class="form-control customImg" formControlName="imageName" 
                                              [ngClass]="!pipelineArr.get('dockerImageName.imageName').valid && pipelineArr.get('dockerImageName.imageName').touched ? 'is-invalid':''">
                                                <option value="" [disabled]="true">Select</option>
                                                <option *ngFor="let dockerimages of dockerImageDropdownData[i]" value="{{dockerimages}}">{{dockerimages}}</option>
                                              </select>
                                            </div>
                                        </div>
                                        <span *ngIf="!pipelineArr.get('dockerImageName.imageName').valid && pipelineArr.get('dockerImageName.imageName').touched"
                                        class="help-block">Docker Image Name is required</span>
                                      </div>
                                      <div class="col-12 padding0" formArrayName="pipelineParameters">
                                        <div class="row" *ngFor="let pipelineParameterArr of pipelineArr.get('pipelineParameters')['controls']; let k=index">
                                          <div class="col-12 " [formGroupName]="k">
                                            <div class="form-group mb-3 pl-3 text-muted">
                                              <label>{{pipelineParameterArr.get('name').value}}</label>
                                              <div class="d-flex mr-6 align-items-center">
                                                <input *ngIf = "pipelineParameterArr.get('type').value !== 'boolean'" type="{{pipelineParameterArr.get('type').value === 'string'? 'text' : 'number'}}" 
                                                class="form-control" placeholder="{{getProperValue(i,j,k)}}" formControlName="value" 
                                                [ngClass]="!pipelineParameterArr.get('value').valid && pipelineParameterArr.get('value').touched ? 'is-invalid':''">
                                                <select *ngIf = "pipelineParameterArr.get('type').value === 'boolean'" class="form-control" formControlName="value"
                                                [ngClass]="!pipelineParameterArr.get('value').valid && pipelineParameterArr.get('value').touched ? 'is-invalid':''">
                                                  <option value="">Select</option>
                                                  <option value="True">True</option>
                                                  <option value="False">False</option>
                                                </select> 
                                              </div>
                                              <span *ngIf="!pipelineParameterArr.get('value').valid && pipelineParameterArr.get('value').touched"
                                                      class="help-block">{{pipelineParameterArr.get('name').value}} is required</span>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-12 pull-right">
                                      <div class="page_access text-right py-2 px-3">
                                        <!-- <button class="btn btn-default ml-2" disabled="disabled">Save</button> -->
                                        <button class="btn btn-primary ml-2" *ngIf="servicesForm.valid" (click)="SubmitSaporForm(i)">Save</button>
                                        <button class="btn btn-default ml-1" (click)="cancelForm()">Cancel</button>
                                        <!-- <button class="btn btn-danger ml-1" data-toggle="tooltip" data-placement="top" data-original-title="Disable and remove the feature for this service" (click)="deleteSaporForm(i)" >Delete</button> -->
                                        <button class="btn btn-danger ml-1" (click)="deleteSaporForm(i)" *ngIf="!editMode && saporFeatureSaved">Delete</button>
                                        <button class="btn btn-danger ml-1" (click)="deleteSaporForm(i)" *ngIf="editMode && isFeaturePresent[serviceId] && isFeaturePresent[serviceId]['sapor']">Delete</button>
                                        <button class="btn btn-primary ml-1" (click)="cancelForm()" *ngIf="saporFeatureSaved">Finish</button>

                                      </div>
                                    </div>
                                  </div>
                                </div>
                             
                              </div>

                              <div class="col-7" *ngIf="selectedFeature[i] === 'deployment_verification'">
                                <div>
                                  <form [formGroup]="deploymentVerificationForm">
                                    <table class="table table-bordered">
                                      <thead>
                                      <tr>
                                        <th>Deployment Verification Configuration <i data-toggle="tooltip" data-placement="top" data-original-title="Continuous verification of the software image for risks" class="fa fa-question-circle" aria-hidden="true"></i></th>
                                      </tr>
                                      </thead>
                                    </table>
                                    <div class="form-group mb-3 text-muted"  >
                                      <label>Log Template</label>
                                      <div class="d-flex  mr-5 align-items-center">
                                        <select class="form-control" formControlName="logTemplate">
                                          <option value="" [disabled]="true">Select</option>
                                          <option *ngFor="let logTemplate of logTemplateList" value="{{logTemplate}}">{{logTemplate}}</option>
                                        </select>
                                        <span *ngIf="logTemplateList?.length > 0" class="ml-2 addTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Edit Log Template" (click)="onEditLogMetricTemplateClick('log')">
                                          <a data-toggle="modal" data-target="#newLogTemplate" data-backdrop="static" data-keyboard="false" class="btn-link" >
                                            <i style="color:#4797de !important;" class="fas fa-pencil-alt"></i>
                                          </a>
                                        </span>
                                        <span class="ml-2 addTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Add New Log Template" (click)="onAddTemplate(i,'log')">
                                          <a data-toggle="modal" data-target="#newLogTemplate" data-backdrop="static" data-keyboard="false" class="btn-link">
                                            <i class="fas fa-plus"></i>
                                          </a>
                                        </span>
                                        <span *ngIf="logTemplateList?.length > 0" class="ml-2 addTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Edit Log Template">
                                          <a class="btn-link" (click)="onClickLogTemplate()">
                                            <i style="color:#4797de !important;" class="fas fa-pencil-alt"></i>
                                          </a>
                                        </span>
                                        <span class="ml-2 addTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Add New Log Template">
                                          <a  (click)="onClickLogTemplate(true)" class="btn-link">
                                            <i class="fas fa-plus"></i>
                                          </a>
                                        </span>
                                      </div>
                                    </div>
                                    <div class="form-group mb-3 text-muted">
                                      <label>Metric Template</label>
                                      <div class="d-flex  mr-5 align-items-center">
                                        <select class="form-control" formControlName="metricTemplate">
                                          <option value="" [disabled]="true">Select</option>
                                          <option *ngFor="let metricTemplate of metricTemplateList" value="{{metricTemplate}}">{{metricTemplate}}</option>
                                        </select>
                                        <span *ngIf="metricTemplateList?.length > 0" class="ml-2 addTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Edit Metric Template" (click)="onEditLogMetricTemplateClick('metric')">
                                          <a data-toggle="modal" data-target="#newMatricTemplate" data-backdrop="static" data-keyboard="false" class="btn-link">
                                            <i style="color:#4797de !important;" class="fas fa-pencil-alt"></i>
                                          </a>
                                        </span>
                                        <span class="ml-2 addTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Add New Metric Template" (click)="onAddTemplate(i,'metric')" >
                                          <a data-toggle="modal" data-target="#newMatricTemplate" data-backdrop="static" data-keyboard="false" class="btn-link" >
                                            <i class="fas fa-plus"></i>
                                          </a>
                                        </span>
                                      </div>
                                    </div>
                                    <div class="col-12 pull-right">
                                      <div class="page_access text-right py-2 px-3">
                                        <!-- <button class="btn btn-default ml-2" disabled="disabled">Save</button> -->
                                        <button class="btn btn-primary ml-2" (click)="saveDeploymentVerification()" *ngIf="deploymentVerificationForm.value.metricTemplate != '' || deploymentVerificationForm.value.logTemplate != ''" >Save</button>                                      
                                        <button class="btn btn-danger ml-1" (click)="deleteDeploymentVerification()" *ngIf="!editMode && deploymentVerificationFeatureSaved">Delete</button>
                                        <button class="btn btn-danger ml-1" (click)="deleteDeploymentVerification()" *ngIf="editMode && isFeaturePresent[serviceId] && isFeaturePresent[serviceId]['deployment_verification']">Delete</button>
                                      </div>
                                    </div>
                                  </form>
                                </div>
                              </div>

                              <div class="col-7" *ngIf="selectedFeature[i] === 'visibility'">

                                <div>
                                  <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                      <th>Visibility Configuration</th>
                                    </tr>
                                    </thead>
                                  </table>
                                  <div class="form-group mb-3 pl-1 text-muted">
                                    <form [formGroup]="gateForm">
                                    <label>Approval Gate <i data-toggle="tooltip" data-placement="top" data-original-title="Visibility during delivery to make informed Approvals" class="fa fa-question-circle" aria-hidden="true"></i></label>
                                    <div class="d-flex  mr-2 align-items-center">
                                    <input type="text"  class="form-control  input_len" formControlName="gateName"  [ngClass]="gateForm.get('gateName').invalid && gateForm.get('gateName').touched ? 'is-invalid':''"> 
                                    <span *ngIf="gateForm.get('gateName').invalid && gateForm.get('gateName').touched" class="invalid-feedback">
                                      <span *ngIf="gateForm.get('gateName').errors['required']">Approval Gate Name is required</span>
                                    </span>
                                      <!-- <span class="ml-2 addTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Update gate name">
                                        <a data-keyboard="false" class="btn-link">
                                          <i class="fas fa-pencil-alt"></i>
                                        </a>
                                      </span> -->  
                                      <ng-container *ngIf="gateId == '' && !isEditGateEnabled">                                    
                                        <span class="ml-2 addTemplate tick-button" data-toggle="tooltip" data-placement="top" data-original-title="Save" (click)="saveGateForm()">
                                          <a data-keyboard="false" class="btn-link">
                                            <i class="fa fa-check" aria-hidden="true"></i>
                                          </a>
                                        </span>
                                        <span class="ml-2 addTemplate close-button" data-toggle="tooltip" data-placement="top" data-original-title="Clear" (click)="clearGateName()">
                                          <a data-keyboard="false" class="btn-link">
                                            <i class="fa fa-close" aria-hidden="true"></i>
                                          </a>
                                        </span>
                                      </ng-container>  
                                      <ng-container *ngIf="gateId != '' && !isEditGateEnabled">
                                        <span class="ml-2 addTemplate" data-placement="top" title="Update gate name" (click)="onClickEditOfGateName()">
                                          <a data-keyboard="false" class="btn-link">
                                            <i style="color:#4797de !important;" class="fas fa-pencil-alt"></i>
                                          </a>
                                        </span>
                                        <!-- <span>
                                          <a class="text-muted formarray_btn ml-2"  data-toggle="tooltip" data-placement="right" title="Delete" (click)="onDeleteGateName()">
                                            <i class="mt_custom-3 fas fa-trash-alt"></i>
                                          </a>
                                        </span> -->
                                      </ng-container> 
                                      <ng-container *ngIf="isEditGateEnabled">                                    
                                        <span class="ml-2 addTemplate tick-button"  data-placement="top" title="Save" (click)="onEditGateName()">
                                          <a data-keyboard="false" class="btn-link">
                                            <i class="fa fa-check" aria-hidden="true"></i>
                                          </a>
                                        </span>
                                        <span class="ml-2 addTemplate close-button" data-toggle="tooltip" data-placement="top" data-original-title="Clear" (click)="clearGateName()">
                                          <a data-keyboard="false" class="btn-link">
                                            <i class="fa fa-close" aria-hidden="true"></i>
                                          </a>
                                        </span>
                                      </ng-container>                                     
                                      <!-- <button class="btn btn-primary ml-4" type="submit" (click)="saveGateForm()" >Save</button> -->
                                      <!-- <button class="btn btn-default ml-1" (click)="cancelForm()">Cancel</button> -->
                                    </div> 
                                    <div *ngIf="gateId != ''" class="pt-3 pb-2">
                                      <label>Trigger URL <i data-toggle="tooltip" data-placement="top" data-original-title="URL can be used to trigger Approval Gate" class="fa fa-question-circle" aria-hidden="true"></i></label>
                                      <div class="d-flex  mr-2 align-items-center">
                                        <span >{{triggerURL}} <i class="fa fa-clipboard" title="Copy to clipboard" role="button" aria-hidden="true" ngxClipboard [cbContent]="triggerURL"></i>  </span>
                                      </div>
                                    </div>
                                      <!-- <span *ngIf="servicesForm.get('services')['controls'][i].get('serviceName').invalid && servicesForm.get('services')['controls'][i].get('serviceName').touched"
                                      class="help-block">
                                      <span *ngIf="servicesForm.get('services')['controls'][i].get('serviceName').errors['required']">Service name is required</span>
                                      <span *ngIf="servicesForm.get('services')['controls'][i].get('serviceName').errors['containSpace']">Space is not allowed in Service Name</span>
                                      <span *ngIf="servicesForm.get('services')['controls'][i].get('serviceName').errors['startingFromNumber']">The service name must begin with a letter.</span>
                                      <span *ngIf="servicesForm.get('services')['controls'][i].get('serviceName').errors['symbols']">No Special characters are allowed.</span>
                                    </span> -->
                                    </form>
                                  </div>
                                  <div class="form-group group_permission">
                                    <div class="row">
                                      <!-- <div class="col-12">
                                        <form [formGroup]="environmentForm">
                                          <table class="table table-outline" formArrayName="environments">
                                            <thead>
                                              <tr>
                                                <th>Tooltype</th>
                                                <th>Account</th>
                                                <th>Template</th>
                                                <th class="text-right"><a (click)="addEnvironment()" data-toggle="tooltip" data-placement="top" data-original-title="Add New Environment"><i class="fas fa-plus"></i></a></th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr >
                                                <ng-container>
                                                  <td>
                                                    <select class="form-control">
                                                <option value="" [disabled]="true">Select Type</option>
                                                <option>JIRA</option>
                                              </select>
                                                  </td>
                                                  <td>
                                                    <select class="form-control" >
                                                      <option value="" [disabled]="true">Select Account</option>
                                                      <option>Account1</option>
                                                    </select>
                                                  </td>
                                                  <td>
                                                    <div class="d-flex  mr-2 align-items-center">
                                                    <select class="form-control">
                                                      <option value="" [disabled]="true">Select Template</option>
                                                      <option>Template</option>
                                                    </select>
                                                    <span class="ml-2 addTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Edit Metric Template" >
                                                      <a data-toggle="modal" data-target="#newMatricTemplate" data-backdrop="static" data-keyboard="false" class="btn-link">
                                                        <i class="fas fa-pencil-alt"></i>
                                                      </a>
                                                    </span>
                                                    <span class="ml-2 addTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Add New Metric Template"  >
                                                      <a data-toggle="modal" data-target="#newMatricTemplate" data-backdrop="static" data-keyboard="false" class="btn-link" >
                                                        <i class="fas fa-plus"></i>
                                                      </a>
                                                    </span>
                                                    </div>
                                                  </td>
                                                  <td>
                                                    <a class="text-muted formarray_btn"  data-toggle="tooltip" data-placement="right" title="Delete"
                                                    >
                                                      <i class="mt_custom-3 fas fa-trash-alt"></i></a>
                                                  </td>
                                                </ng-container>
                                              </tr>
                                            </tbody>
                                          </table>
                                        </form>
                                      </div> -->
                                      
                                      <div class="col-12" *ngIf="gateId && visibilityForm.value.visibilityConfig.length !== 0 ? true : false ">
                                        <app-connector-template-config [approvalGateId]="gateId"></app-connector-template-config>
                                      </div>
                                      <!-- <div class="col-12" *ngIf="visibilityForm.value.visibilityConfig.length !== 0 ? true : false ">
                                        <form [formGroup]="visibilityForm">
                                          <table class="table table-outline" formArrayName="visibilityConfig">
                                            <thead>
                                              <tr>
                                                <th>Connector <i data-toggle="tooltip" data-placement="top" data-original-title="Tool to gather information for informed Approvals" class="fa fa-question-circle" aria-hidden="true"></i></th>
                                                <th>Account <i data-toggle="tooltip" data-placement="top" data-original-title="Account name of the connector" class="fa fa-question-circle" aria-hidden="true"></i></th>
                                                <th>Template <i data-toggle="tooltip" data-placement="top" data-original-title="Define the specific fields of interest from connector" class="fa fa-question-circle" aria-hidden="true"></i></th>
                                                <th class="text-right" *ngIf="addNewConnectorAllowed && !hideVisibilityPlusIcon"><a (click)="addNewConnector()" data-toggle="tooltip" data-placement="top" data-original-title="Add New Connector"><i class="fas fa-plus"></i></a></th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr *ngFor="let optionsArr of visibilityForm.get('visibilityConfig')['controls'];let i=index" (mouseenter)="toolTypeRowHoverd[i] = true" (mouseleave)="toolTypeRowHoverd[i] = false">
                                                <ng-container [formGroupName]="i">
                                                  <td>
                                                    <select *ngIf="!toolTypeDataSaved[i]" class="form-control" formControlName="connectorType" (change)="onChangeTooltype($event.target.value)">
                                                      <option value="" [disabled]="true">Select</option>                                                       
                                                      <option *ngFor="let tooltype of toolTypes[i]" value="{{tooltype}}" >
                                                          {{tooltype}}</option>
                                                    </select>
                                                    <span *ngIf="toolTypeDataSaved[i]">{{optionsArr.controls.connectorType.value}}</span>
                                                  </td>
                                                  <td>                                                    
                                                    <select class="form-control" formControlName="accountName" (change)="onChangeAccountofTooltype($event.target.value)">
                                                      <option value="" [disabled]="true">Select</option>                                                       
                                                      <option *ngFor="let account of accountsForTooltypes[i]" value="{{account.visibilityToolConnectorId}}" >
                                                          {{account.accountName}}</option>
                                                    </select>
                                                  </td>
                                                  <td>
                                                    <div class="d-flex  mr-2 align-items-center position-relative">                                                      
                                                      <select class="form-control template-dropdown" formControlName="templateName" (change)="onChangeTemplateofTooltype($event.target.value, i)">
                                                        <option value="" [disabled]="true">Select</option>                                                       

                                                        <option *ngFor="let template of templatesForToolType[i]" value="{{template.id}}" > {{template.name}}</option>
                                                        <option value="+">+ Add Template</option>   
                                                      </select>
                                                      <span class="ml-2 editTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Edit Template" *ngIf="templateId[i]" (click)="editTemplate(i)">
                                                        <a class="btn-link">
                                                          <i class="fas fa-pencil-alt"></i>
                                                        </a>
                                                      </span>
                                                      <span class="ml-2 editTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Edit Template" *ngIf="templateId[i]" [hidden]="true">
                                                        <a data-toggle="modal" data-target="#newTemplateForTooltype" data-backdrop="static" data-keyboard="false" class="btn-link" #edittemplate>
                                                          <i class="fas fa-pencil-alt"></i>
                                                        </a>
                                                      </span>
                                                      <span class="ml-2 addTemplate" data-toggle="tooltip" data-placement="top" data-original-title="Add New Template" [hidden]="true" >
                                                        <a data-toggle="modal" data-target="#newTemplateForTooltype" data-backdrop="static" data-keyboard="false" class="btn-link" #newtemplate>
                                                          <i class="fas fa-plus"></i>
                                                        </a>
                                                      </span>
                                                    </div>
                                                  </td>
                                                  <td class="hover-buttons-td">
                                                    <div class="d-flex  mr-2 align-items-center" *ngIf="toolTypeRowHoverd[i]">
                                                      <span class="ml-2 mt-1" *ngIf="!editConnectorRow[i]">
                                                        <a class="formarray_btn" data-toggle="tooltip" data-placement="top" title="Edit" *ngIf="!editConnectorRow[i]"
                                                          (click)="editConnect(i)">
                                                          <i class="fas fa-pen"></i>
                                                        </a>
                                                      </span>
                                                      <span class="ml-2 mt-1" *ngIf="editConnectorRow[i]">
                                                        <a class="formarray_btn" data-toggle="tooltip" data-placement="top" title="Save" *ngIf="editConnectorRow[i]"
                                                          (click)="saveConnector(i)">
                                                          <i class="fa fa-save"></i>
                                                        </a>
                                                      </span>
                                                      <span class="ml-2 mt-1">
                                                        <a class="formarray_btn text-delete" data-toggle="tooltip" data-placement="top" title="Delete"
                                                          (click)="removeConnector(i)">
                                                          <i class="far fa-trash-alt"></i>
                                                        </a>
                                                      </span>
                                                    </div>
                                                  </td>
                                                </ng-container>
                                              </tr>
                                            </tbody>
                                          </table>
                                        </form>
                                      </div> -->
                                      
                                      <!-- <div class="col-6">
                                        <a class="btn btn-link btn-link-black" *ngIf="visibilityForm.value.visibilityConfig.length === 0 ? true : false " (click)="addConnector()">Add Visibility Config</a>
                                      </div> -->

                                      <div class="col-12 pull-right" *ngIf = "gateId != '' && gateId != null && gateId != undefined ">
                                        <div class="page_access text-right py-2 px-3">                                          
                                          <!-- <button class="btn btn-primary ml-2" (click)="SubmitVisibilityForm()">Save</button> -->
                                          <button class="btn btn-danger ml-1" (click)="deleteVisibilityFeature()" data-toggle="tooltip" data-placement="top" title="Disable and remove the feature for this service">Delete</button>
                                        </div>
                                      </div>
                                      
                                    </div>
                                 
                                  </div>
                                </div>
                              </div>

                          </div>
                          
                          
                          <!-- <div class="form-group mb-3 pl-4 text-muted">
                            <label>Select Feature</label>
                            <div class="d-flex  mr-4 align-items-center">
                              <select class="form-control" formControlName="featureName" (change)="selectFeature($event.target.value,i)" #selectedfeature>
                                <option value="" [disabled]="true">Select</option>
                                <option *ngFor="let feature of featureList" value="{{feature}}">{{feature}}</option>
                              </select>
                            </div>
                            <span *ngIf="servicesForm.get('services')['controls'][i].get('featureName').invalid && servicesForm.get('services')['controls'][i].get('featureName').touched"
                            class="help-block">
                            <span *ngIf="servicesForm.get('services')['controls'][i].get('featureName').errors['required']">Feature is required</span>
                            </span>
                          </div> -->
                       
                        </div>
                      </div>
                    </div>
                    <!-- <div class="col-12 ">
                      <hr class="ml-0 mt-3 mb-3" />
                    </div> -->
                    
                   
                  </div>
                </form>
              </div>
             
              <div class="col-6" *ngIf="showServiceForm && showFeatureData">
                <a class="btn btn-link btn-link-black" (click)="addService()">Add another Service</a>
              </div>
              <!-- /.col-6 -->
  
              <!-- ###################### Services Section Ends #####################################-->
  
               <!-- ###################### Environment Section Starts ###########################-->
  
           
              <!-- /.col-8 -->
              <div class="col-8" *ngIf="showEnvironmentForm">
                <div class="form-group group_permission">
                  <label>Environments <i data-toggle="tooltip" data-placement="top" data-original-title="Environmental values for the CICD pipeline" class="fa fa-question-circle" aria-hidden="true"></i></label>
                  <!-- <div class="col-8">
                    <hr class="ml-0 mt-3 mb-3" />
                  </div> -->
                  <div class="row">
                    <div class="col-9">
                      <form [formGroup]="environmentForm" *ngIf="environmentForm.value.environments.length != 0 ? true : false ">
                        <table class="table table-outline" formArrayName="environments">
                          <thead>
                            <tr>
                              <th>Key</th>
                              <th>Value</th>
                              <th class="text-right"><a (click)="addEnvironment()" data-toggle="tooltip" data-placement="top" data-original-title="Add New Environment"><i class="fas fa-plus"></i></a></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let optionsArr of environmentForm.get('environments')['controls'];let i=index">
                              <ng-container [formGroupName]="i">
                                <td>
                                  <input type="text" class="form-control" formControlName="key" 
                                  [ngClass]="!environmentForm.get('environments')['controls'][i].get('key').valid && environmentForm.get('environments')['controls'][i].get('key').touched ? 'is-invalid':''">
                                  <span *ngIf="!environmentForm.get('environments')['controls'][i].get('key').valid && environmentForm.get('environments')['controls'][i].get('key').touched"
                                  class="invalid-feedback">Key is required</span>
                                </td>
                                <td>
                                  <input type="text" class="form-control" formControlName="value">
                                </td>
                                <td>
                                  <a class="text-muted formarray_btn"  data-toggle="tooltip" data-placement="right" title="Delete"
                                  (click)="removeEnvironment(i)">
                                    <i style="color: red !important;" class="mt_custom-3 far fa-trash-alt"></i></a>
                                </td>
                              </ng-container>
                            </tr>
                          </tbody>
                        </table>
                      </form>
                    </div>
                  </div>
                  <div class="col-6">
                    <a class="btn btn-link btn-link-black" *ngIf="environmentForm.value.environments.length === 0 ? true : false " (click)="addEnvironment()">Add Environment</a>
                  </div>
                </div>
                <!-- /.form-group -->
                 <!--col-12-->
                 <div class="col-8 pull-right" *ngIf="environmentForm.value.environments.length !== 0 ? true : false ">
                  <div class="page_access text-right py-2 px-3">
                    <!-- <button class="btn btn-primary ml-2" *ngIf="editMode" (click)="SubmitEnvironmentsForm()">Update</button> -->
                    <button class="btn btn-primary ml-2" (click)="SubmitEnvironmentsForm()">Save</button>
                    <button class="btn btn-default ml-1" (click)="cancelForm()">Cancel</button>
                    <button class="btn btn-danger ml-1" *ngIf="environmentFeatureSaved || envData && envData.environments.length >=1 || environmentFeatureUpdated" (click)="deleteEnvironments()"> Delete</button>
 
                    <!-- <button class="btn btn-default ml-2" disabled="disabled">Save</button> -->
                   
                  </div>
                </div>
                  <!--/.clo-12-->
              </div>
             
  
              <!-- ###################### Environment Section Ends ###########################-->
  
              <!-- ###################### Group Permission Section Starts ###########################-->
  
             
              <div  class="col-lg-8 col-12 col-xl-6" *ngIf="showPermissionForm">
                <div class="form-group group_permission">
                  <label>Group Permissions <i data-toggle="tooltip" data-placement="top" data-original-title="Authorisation definition for this application" class="fa fa-question-circle" aria-hidden="true"></i></label>
                  <!-- <div class="col-12">
                    <hr class="ml-0 mt-3 mb-3" />
                  </div> -->
                  <ng-container>
                    <div class="row" *ngIf="groupPermissionForm.value.userGroups.length !== 0 ? true : false ">
                      <div class="col-12">
                        <form [formGroup]="groupPermissionForm">
                          <table class="table table-outline" formArrayName="userGroups">
                            <thead>
                              <tr>
                                <th>Group</th>
                                <th>Permissions</th>
                                <th class="text-right"><a (click)="addGroup()" data-toggle="tooltip" data-placement="top" data-original-title="Add New Group"><i class="fas fa-plus"></i></a></th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let optionsArr of groupPermissionForm.get('userGroups')['controls'];let i=index">
                                <ng-container [formGroupName]="i">
                                  <td>
                                    <div class="row">
                                      <div class="col-12">
                                        <select class="form-control" formControlName="userGroupId" (change)="permissionContrlValid(groupPermissionForm.get('userGroups')['controls'][i].get('permissionIds'))"
                                        [ngClass]="!groupPermissionForm.get('userGroups')['controls'][i].get('userGroupId').valid && groupPermissionForm.get('userGroups')['controls'][i].get('userGroupId').touched ? 'is-invalid':''">
                                          <option value="" [disabled]="true">Select</option>
                                          <option *ngFor = "let user of userGroupDropdownData[i]  | nonAdmins: user" value="{{user.userGroupId}}" >{{user.userGroupName}}</option>
                                        </select>
                                        <span *ngIf="groupPermissionForm.get('userGroups')['controls'][i].get('userGroupId').invalid && groupPermissionForm.get('userGroups')['controls'][i].get('userGroupId').touched"
                                        class="invalid-feedback">
                                          <span *ngIf="groupPermissionForm.get('userGroups')['controls'][i].get('userGroupId').errors['required']">Group name is required</span>
                                          <span *ngIf="groupPermissionForm.get('userGroups')['controls'][i].get('userGroupId').errors['groupNameExist']">Group name already exist</span>
                                        </span>
                                      </div>
                                    </div>
                                    
                                  </td>
                                  <td class="{{userGroupPermissions.length<4?'usergroupCheckbox':''}}" formArrayName="permissionIds">
                                      <div class="custom-control custom-checkbox">
                                        <div class="row">
                                          <div class="col-4" *ngFor="let permissionIds of optionsArr.get('permissionIds')['controls'];let j=index">
                                            <ng-container [formGroupName]="j">
                                              <input type="checkbox" class="custom-control-input" formControlName="value" id="value{{i}}{{j}}">
                                              <label class="custom-control-label" for="value{{i}}{{j}}">{{permissionIds.get('name').value}}</label>
                                            </ng-container>
                                          </div>
                                        </div>
                                      </div>
                                    <span class="checkboxErrorText" *ngIf="groupPermissionForm.get('userGroups')['controls'][i].get('permissionIds').touched && 
                                    permissionContrlValid(groupPermissionForm.get('userGroups')['controls'][i].get('permissionIds'))">At least one permissions is selected. please select</span>
                                  </td>
                                  <td>
                                    <a class="text-muted formarray_btn"  data-toggle="tooltip" data-placement="right" title="Delete" 
                                    (click)="removeGroup(i)">
                                      <i style="color: red !important;" class="mt_custom-3 far fa-trash-alt"></i></a>
                                  </td>
                                </ng-container>
                              </tr>
                            </tbody>
                          </table>
                        </form>
                      </div>
                    </div>
                    <div class="col-6">
                      <a class="btn btn-link btn-link-black" *ngIf="groupPermissionForm.value.userGroups.length === 0 ? true : false " (click)="addGroup()">Add Group</a>
                    </div>
                  </ng-container>
                  <h6 class="userGroupErrorMessage" *ngIf = "userGroupData.length == 0 && userGroupPermissions.length == 0"> User Group is not available to set the permissions !!</h6>
                </div>
                <!-- /.form-group -->
              </div>
              <!-- /.col-6 -->
               <!--col-12-->
               <div class="col-8 pull-right" *ngIf="showPermissionForm && groupPermissionForm.value.userGroups.length !== 0 ? true : false ">
                <div class="page_access text-right py-2 px-3">
                  <button class="btn btn-primary ml-2" (click)="SubmitGroupPermissionForm()">Save</button>
                  <button class="btn btn-default ml-1" (click)="cancelForm()">Cancel</button>
                  <button class="btn btn-danger ml-1" *ngIf="groupPermissionFeatureSaved || editMode" (click)="deleteGroupPermissions()">Delete</button>

                  <!-- <button class="btn btn-default ml-2" disabled="disabled">Save</button> -->
                 
                </div>
              </div>
                <!--/.clo-12-->
  
              <!-- ###################### Group Permission Section Ends ###########################-->
  
            </div>
            <!-- /.row -->
          </div>
  
  
  
          <!-- <div *ngIf="showFeatures" class="p-3 bottom-strp-cover gray-strip text-right">
            <button class="btn btn-default" (click)="cancelForm()">Cancel</button> -->
            <!-- <button class="btn btn-default ml-2" disabled="disabled">Save</button> -->
            <!-- <button class="btn btn-primary ml-2" (click)="SubmitForm()">Save & Finish</button>
          </div> -->
        </div>
        <!-- /.col-sm-9 -->
      </div>
      <!-- /.row -->
    </div>
    <!-- /.setup-content -->
  </div>
  <div *ngIf = "apploading" class="tab-pane d-flex flex-column bg-white h-100 fade show active">
    <app-loading-screen></app-loading-screen>
  </div>
  <div *ngIf = "!apploading && apiLoadingError" class="tab-pane d-flex flex-column bg-white h-100 fade show active">
    <!-- <app-component-error-listing [errorString]="errorMessage" class="apifailerror"></app-component-error-listing> -->
  </div>
</div>

<!-- Modal Log -->
<div class="modal bd-example-modal-lg fade" id="newLogTemplate" tabindex="-1" role="dialog" aria-labelledby="newLogTemplateLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-width" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{logTemplateEditMode?'Edit Log Template':'New Log Template'}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" #logModel>
          <i class="fa fa-times"></i>
        </button>
      </div>
      <div class="modal-body p-0">
        <app-log-template [isEditMode]="logTemplateEditMode" [templateData]="logTemplateDetails" [templateIndex]="editTemplateIndex" [applicationId] = "applicationId" [applicationData]="selectedApplicationData"></app-log-template>
      </div>
    </div>
  </div>
</div>

<!-- Modal Matric -->
<div class="modal bd-example-modal-lg fade" id="newMatricTemplate" tabindex="-1" role="dialog" aria-labelledby="newMatricTemplateLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-width" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{metricTemplateEditMode ? 'Edit Metric Template':'New Metric Template'}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" #metricModel>
          <i class="fa fa-times"></i>
        </button>
      </div>
      <div class="modal-body p-0">
        <app-metric-template [isEditMode]="metricTemplateEditMode" [templateData]="metricTemplateDetails" [templateIndex]="editTemplateIndex" [metricTemplate]="isMetricTemplateClicked" [applicationData]="selectedApplicationData"></app-metric-template>
      </div>
    </div>
  </div>
</div>


<!-- Modal Matric -->
<!-- <div class="modal bd-example-modal-lg fade" id="newTemplateForTooltype" tabindex="-1" role="dialog" aria-labelledby="newTemplateForTooltypeLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-width template-popup" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{templateEditMode ? 'Edit Template':'New Template'}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeTemplatePopup()" #tooltypeTemplateModel>
          <i class="fa fa-times"></i>
        </button>
      </div>
      <div class="modal-body p-0">
        <div class="pt-1">
          <ul class="nav tab-lined nav-tabs" id="templateTooltypeTab" role="tablist" (click)="onClickTemplateTab($event.target.id)">            
            <li class="nav-item" >
              <a class="nav-link {{selectedTTTemplateTab === 'tooltype-template-form' ? 'active': ''}} clickable" id="tooltype-template-form-tab" data-toggle="tab" role="tab" aria-controls="tooltype-template-form" aria-selected="true">Template</a>
            </li>
            <li  class="nav-item">
              <a class="nav-link {{selectedTTTemplateTab === 'tooltype-template-editor' ? 'active': ''}} clickable"  id="tooltype-template-editor-tab" data-toggle="tab" role="tab" aria-controls="tooltype-template-editor" aria-selected="true">Editor</a>
            </li>           
          </ul>          
          <div class="tab-content" id="myTabContent">
            <div id="tooltype-template-form" role="tabpanel" aria-labelledby="tooltype-template-form-tab">         
              <div class="col-12 maindiv" *ngIf = "selectedTTTemplateTab === 'tooltype-template-form'">
                <div class="p-3">
                  <form [formGroup]="toolTemplateForm">
                    <div class="form-group">
                      <label>Tool Type:</label>
                      <input type="text" appLowercase class="form-control" formControlName="toolType" [readonly]="true">
                    </div>
                    <div class="form-group">
                      <label>Name:</label>
                      <input type="text" class="form-control" formControlName="name"
                        [ngClass]="toolTemplateForm.get('name').invalid && toolTemplateForm.get('name').touched ? 'is-invalid':''">
                      <span *ngIf="toolTemplateForm.get('name').invalid && toolTemplateForm.get('name').touched" class="invalid-feedback">
                        <span *ngIf="toolTemplateForm.get('name').errors['required']">Name is required</span>
                      </span>
                    </div>
                    <div class="form-group">
                      <label>Template</label>
                      <textarea class="form-control" rows="3" formControlName="template"></textarea>
                    </div>
                  </form>
                </div>
                <div class="p-3">
                  <div class="page_access text-right">
                    <button class="btn btn-primary ml-2" (click)="saveToolTypeTemplateForm()">Save</button>                
                  </div>
                </div>
               </div>                
            </div>
            <div id="tooltype-template-editor" role="tabpanel" aria-labelledby="tooltype-template-editor-tab">          
                <div class="col-12 maindiv" *ngIf = "selectedTTTemplateTab === 'tooltype-template-editor'">
                  <json-editor class="template-editor" [options]="tooltypeTemplateEditor" [data]="tooltypeTemplateData" (change)="getJsonFromTooltypeTemplateEditor($event)"></json-editor>
                  <div class="col-12 text-right pr-0">
                    <button class="btn btn-primary ml-2 savebtn mt-2 mb-2" (click)="saveTooltypeTemplate()">Save</button>
                  </div>
                 </div>            
            </div>
          </div>          
        </div>
      </div>
    </div>
  </div>
</div> -->
