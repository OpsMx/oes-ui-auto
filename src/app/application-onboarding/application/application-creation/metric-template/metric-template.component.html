  <div class="pt-1">
    <ul class="nav tab-lined nav-tabs" id="myTab" role="tablist" (click)="onClickTab($event)">
      <li class="nav-item" >
        <a class="nav-link" id="metric-form-tab" data-toggle="tab" role="tab" aria-controls="metric-form" aria-selected="true">Form</a>
      </li>
      <li  class="nav-item">
        <a class="nav-link"  id="metric-editor-tab" data-toggle="tab" role="tab" aria-controls="metric-editor" aria-selected="true">Editor</a>
      </li>
     
    </ul>
    
    <div class="tab-content" id="myTabContent">
      <div id="metric-form" role="tabpanel" aria-labelledby="metric-form-tab">         
          <div *ngIf = "selectedTab === 'metric-form'" class="col-12 maindiv">
            
                       
              <div id="step-1">
                <div class="multisteps-form__content">
                   <div class="px-4 py-3">
                    <form [formGroup]="createMetricForm">  
                     <div class="row">
                       <div class="col-6">
                         <div class="form-group">
                           <label>Metric Template Name</label>
                           <input type="text" class="form-control" autofocus="true" formControlName="templateName"/>
                         </div>
                         <!-- /.form-group -->
                       </div>
                       <!-- /.col-6 -->
                     </div>
                     <!-- /.row -->

                     <div class="text-divider">
                       <h4>Data Source</h4>
                     </div>
                     
                     <div class="row">
                       <div class="col-6">
                        <div class="form-group">
                          <label>Select Datasource</label>
                          <select class="form-control" (change)="onChangeDatasource($event.target.value)">
                            <option value="" [disabled]="true">Select</option>
                            <ng-container *ngFor="let datasource of autoDatasources">
                            <option *ngIf="datasource.metricTypes[0] == 'custom' || datasource.metricTypes[0] != undefined" value="{{datasource.datasourceType}}" >
                              {{datasource.displayName}}</option>
                            </ng-container>
                          </select>                          
                        </div>
                         <!-- /.form-group -->

                         <div class="form-group">
                          <label>Select {{selectedCustomDataSource}} Accounts</label>
                          <select class="form-control" (change)="onChangeCustomDSAccount($event.target.value)">
                            <option value="" [disabled]="true">Select</option>                            
                            <option *ngFor="let dsaccount of customDataSourceAccounts" value="{{dsaccount}}" formControlName="accountName" >
                              {{dsaccount}}</option>                           
                          </select>                          
                        </div>
                        
                       </div>
                       <!-- /.col-6 -->
                     </div>
                     <!-- /.row -->
                    </form>

                     <hr class="ml-0 mt-3 mb-3" />
                     <form [formGroup]="queryForm">
                     <div class="row">
                       <div class="col-12">
                         <div class="form-group">
                           <label>Query Selection</label>
                           <table class="table table-outline table-md" formArrayName="queryList">
                             <thead>
                               <tr>
                                <th>Query Name</th>
                                <th>Query String</th>
                                <th>Risk Direction</th>
                                <th><div class="key-value-th key-value-height">Threshold (%)<br>
																	<div style="width: 50%;float: left;text-align: center;">High</div>
																	<div style="width: 50%;float: right;text-align: center;">Low</div>
																	</div></th>
                                <!-- <th>Threshold Low</th> -->
                                <th>Critical</th>
                                <th>Watchlist</th>
                                <th>Weight</th>
                                <th></th>
                               </tr>
                             </thead>
                             <tbody *ngFor="let query of queryForm.get('queryList')['controls']; let i=index">                              
                               <tr [formGroupName]=i>
                                 <td class="px-1" style="width:15%"><input type="text" class="form-control" formControlName="group"></td>
                                 <td class="px-1" style="width:40%"><input type="text" class="form-control" formControlName="name"></td>
                                 <td class="px-1" style="width:5%">
                                  <select class="form-control" formControlName="riskDirection">
                                    <option value="" [disabled]="true">Select</option>                            
                                    <option *ngFor="let riskDirection of riskDirectionList" value="{{riskDirection}}"  >
                                      {{riskDirection}}</option>                           
                                  </select>
                                </td>
                                 <td class="px-1">
                                  <div>
                                    <div style="width: 49%; float: left;"><input id="queryInputCustomThreshold" type="number"  style="text-align: center;height:35px;" formControlName="customThresholdHigher"></div>
                                    <div style="width: 50%; float: right;"><input id="queryInputCustomThreshold"  type="number"  style="text-align: center;height:35px;" formControlName="customThresholdLower"></div>
                                  </div>
                                 </td>
                                 <!-- <td class="px-1"><input type="text" class="form-control" value="" formControlName=""></td> -->
                                 <td class="px-1" style="width:5%">
                                  <div>
                                    <input type="checkbox" id="query-watchlist" formControlName="watchlist">
                                  </div>
                                </td>
                                 <td class="px-1">
                                    <input type="checkbox" id="in_selectAll" formControlName="critical">
                                 </td>
                                 <td class="px-1"> 
                                  <input type="text" class="form-control" value="" formControlName="metricWeight">
                                </td>
                                 <td class="px-1">
                                  <div (click)="addNewQuery()">
                                    <span class="fa fa-plus"></span>
                                  </div>
                                 </td>
                               </tr>
                             </tbody>
                           </table>
                         </div>
                         <!-- /.form-group -->
                       </div>
                       <!-- /.col-6 -->
                     </div>
                     <!-- /.row -->   
                    </form>                         
                   </div>
                 </div>
              </div>
            
            <div class="col-12">
              <button class="btn btn-primary ml-2 savebtn" (click)="savemetrictemplate()">SaveForm</button>
            </div>
                        
          </div>
          
      </div>
      <div id="metric-editor" role="tabpanel" aria-labelledby="metric-editor-tab">          
          <div class="col-12 maindiv" *ngIf = "selectedTab === 'metric-editor'">
            <json-editor [options]="editorOptions" [data]="data" (change)="showJson($event)"></json-editor>
            <div class="col-12">
              <button class="btn btn-primary ml-2 savebtn" (click)="Submitmetricdata()">Save</button>
            </div>
           </div>            
      </div>
    </div>
    
  </div>
